<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC 24V Battery Monitoring</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Link untuk favicon (icon di tab browser) -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="logo">
                <!-- Logo utama (ganti dengan logo Anda) -->
                <div class="custom-logo">
                    <img src="punix logo 2 .png" alt="Company Logo" class="logo-image">
                </div>
                <div>
                    <h1>DC Battery Monitoring</h1>
                    <p class="subtitle">Real-time Monitoring System</p>
                </div>
            </div>

            <div class="header-info">
                <div class="status-indicator online" id="connection-status">
                    <i class="fas fa-wifi"></i>
                    <span>Connected to ESP32</span>
                </div>
                <div class="current-time" id="current-time">
                    <i class="far fa-clock"></i>
                    <span>--:--:--</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Real-time Monitoring Section -->
            <section class="monitoring-section">
                <h2 class="section-title">
                    <i class="fas fa-tachometer-alt"></i> REAL-TIME MONITORING
                </h2>

                <div class="monitoring-cards">
                    <!-- Voltage Card -->
                    <div class="monitor-card voltage">
                        <div class="card-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="card-content">
                            <h3>DC VOLTAGE</h3>
                            <div class="card-value">
                                <span id="voltage-value">00.0</span>
                                <span class="unit">V</span>
                            </div>
                            <div class="card-footer">
                                <div class="gauge">
                                    <div class="gauge-background"></div>
                                    <div class="gauge-fill" id="voltage-gauge"></div>
                                </div>
                                <div class="range-labels">
                                    <span>25.2V</span>
                                    <span>27.2V</span>
                                    <span>29.4V</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Current Card -->
                    <div class="monitor-card current">
                        <div class="card-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="card-content">
                            <h3>CURRENT</h3>
                            <div class="card-value">
                                <span id="current-value">00.0</span>
                                <span class="unit">A</span>
                            </div>
                            <div class="card-footer">
                                <div class="gauge">
                                    <div class="gauge-background"></div>
                                    <div class="gauge-fill" id="current-gauge"></div>
                                </div>
                                <div class="range-labels">
                                    <span>0A</span>
                                    <span>10A</span>
                                    <span>20A</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Temperature Card -->
                    <div class="monitor-card temperature">
                        <div class="card-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="card-content">
                            <h3>BATTERY TEMPERATURE</h3>
                            <div class="card-value">
                                <span id="temperature-value">00.0</span>
                                <span class="unit">°C</span>
                            </div>
                            <div class="card-footer">
                                <div class="gauge">
                                    <div class="gauge-background"></div>
                                    <div class="gauge-fill" id="temperature-gauge"></div>
                                </div>
                                <div class="range-labels">
                                    <span>20°C</span>
                                    <span>30°C</span>
                                    <span>40°C</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="power-info">

                    <!-- Power Calculation -->
                    <div class="power-card">
                        <i class="fas fa-bolt"></i>
                        <div class="power-value">
                            <span id="power-value">00.0</span>
                            <span class="unit">WATT</span>
                        </div>
                    </div>


                    <!-- Additional Cards -->
                    <div class="monitoring-cards">
                        <!-- Battery Capacity -->
                        <div class="monitor-card battery">
                            <div class="card-icon">
                                <i class="fas fa-battery-half"></i>
                            </div>
                            <div class="card-content">
                                <h3>REMAINING CAPACITY</h3>
                                <div class="card-value">
                                    <span id="battery-value">00.0</span>
                                    <span class="unit">%</span>
                                </div>
                                <div class="card-footer">
                                    <div class="gauge">
                                        <div class="gauge-background"></div>
                                        <div class="gauge-fill" id="battery-gauge"></div>
                                    </div>
                                    <div class="range-labels">
                                        <span>0%</span>
                                        <span>50%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Second Row Additional Cards -->
                        <!-- <div class="monitoring-cards"> -->
                            <!-- Remaining Time -->
                            <div class="monitor-card time">
                                <div class="card-icon">
                                    <i class="fas fa-hourglass-half"></i>
                                </div>
                                <div class="card-content">
                                    <h3>REMAINING TIME</h3>
                                    <div class="card-value">
                                        <span id="remaining-time">--</span>
                                        <span class="unit">HOURS</span>
                                    </div>
                                    <div class="card-footer">
                                        <small>Based on current consumption</small>
                                    </div>
                                </div>
                            </div>
                        <!-- </div> -->

                        <!-- Temp Limit Card -->
                        <div class="monitor-card temp-limit">
                            <div class="card-icon">
                                <i class="fas fa-temperature-high"></i>
                            </div>
                            <div class="card-content">
                                <h3>TEMPERATURE LIMIT</h3>
                                <div class="card-value">
                                    <span id="temp-limit-value">00.0</span>
                                    <span class="unit">°C</span>
                                </div>
                                <div class="card-footer">
                                    <div class="gauge">
                                        <div class="gauge-background"></div>
                                        <div class="gauge-fill" id="temp-limit-gauge"></div>
                                    </div>
                                    <div class="range-labels">
                                        <span>20°C</span>
                                        <span>40°C</span>
                                        <span>60°C</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fan Status -->
                        <div class="monitor-card fan">
                            <div class="card-icon">
                                <i class="fas fa-fan"></i>
                            </div>
                            <div class="card-content">
                                <h3>COOLING SYSTEM</h3>
                                <div class="card-value">
                                    <span id="fan-status">OFF</span>
                                </div>
                                <div class="card-footer">
                                    <small>
                                        Current Temp: <strong><span id="temp-value">--</span>°C</strong><br>
                                        Fan activates at: <strong><span id="temp-limit-display">--</span>°C</strong>
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Chart Section -->
            <section class="chart-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i> TREND CHART
                    </h2>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-type="voltage">
                            <i class="fas fa-bolt"></i> Voltage
                        </button>
                        <button class="chart-btn" data-type="current">
                            <i class="fas fa-tachometer-alt"></i> Current
                        </button>
                        <button class="chart-btn" data-type="temperature">
                            <i class="fas fa-thermometer-half"></i> Temperature
                        </button>
                        <button class="chart-btn" data-type="battery">
                            <i class="fas fa-battery-half"></i> Battery
                        </button>
                        <button class="chart-btn" data-type="temp-limit">
                            <i class="fas fa-temperature-high"></i> Temp Limit
                        </button>
                        <button class="chart-btn" data-type="comparison">
                            <i class="fas fa-balance-scale"></i> Comparison
                        </button>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="trend-chart"></canvas>
                </div>
            </section>

            <!-- History Data Section -->
            <section class="history-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-history"></i> HISTORICAL DATA
                    </h2>
                    <div class="section-controls">
                        <button class="btn-export" id="export-btn">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                        <div class="refresh-control">
                            <label for="refresh-rate">Update:</label>
                            <select id="refresh-rate", style="background-color: #0099ff;">
                                <option value="2000">2 seconds</option>
                                <option value="5000">5 seconds</option>
                                <option value="10000">10 seconds</option>
                                <option value="30000">30 seconds</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="history-info">
                    <div class="info-card">
                        <i class="fas fa-database"></i>
                        <div>
                            <h4>TOTAL DATA</h4>
                            <div class="info-value" id="total-data">0</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-sync-alt"></i>
                        <div>
                            <h4>LAST UPDATE</h4>
                            <div class="info-value" id="last-update">--:--:--</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-clock"></i>
                        <div>
                            <h4>UPTIME</h4>
                            <div class="info-value" id="uptime">00:00:00</div>
                        </div>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-temperature-high"></i>
                        <div>
                            <h4>CURRENT TEMP LIMIT</h4>
                            <div class="info-value" id="current-temp-limit">-- °C</div>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th><i class="far fa-calendar"></i> DATE</th>
                                <th><i class="far fa-clock"></i> TIME</th>
                                <th><i class="fas fa-bolt"></i> VOLTAGE</th>
                                <th><i class="fas fa-tachometer-alt"></i> CURRENT</th>
                                <th><i class="fas fa-thermometer-half"></i> TEMPERATURE</th>
                                <th><i class="fas fa-battery-half"></i> BATTERY</th>
                                <th><i class="fas fa-fan"></i> FAN</th>
                                <th><i class="fas fa-temperature-high"></i> TEMP LIMIT</th>
                                <th><i class="fas fa-calculator"></i> POWER</th>
                            </tr>
                        </thead>
                        <tbody id="history-table">
                            <tr class="no-data">
                                <td colspan="9">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    Loading data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination">
                    <button class="pagination-btn" id="prev-page" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <span class="page-info">
                        Page <span id="current-page">1</span> of <span id="total-pages">1</span>
                    </span>
                    <button class="pagination-btn" id="next-page" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <div class="system-info">
                    <p><i class="fas fa-microchip"></i> ESP32 Monitoring System | DC 24V Battery</p>
                    <p>Data Source: <span id="data-source">Google Sheets</span> | Temp Limit: <span
                            id="footer-temp-limit">-- °C</span></p>
                </div>
                <div class="update-info">
                    <p>Last Data: <strong id="last-data-time">--:--:--</strong></p>
                    <p>Status: <span class="status-text" id="system-status">Loading...</span></p>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>

</html>